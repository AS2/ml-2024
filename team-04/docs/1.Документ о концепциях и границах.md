# Документ о концепциях и границах

## Общее описание задачи

В программный продукт (приложение) NAVIS Anchor Planner требуется добавить вычислительный модуль, который с помощью средств машинного обучения будет предсказывать оптимальную раскладку якорей по нарисованной оператором зоне на пользовательском интерфейсе программы.

## Состояние приложения на момент начала проекта

На данный момент приложение выполняет следующую задачу: 

Судно Arctic Scradeway предназначено для отсыпки щебня на дно морского побережья (постель) с помощью трубы (скредера). Это необходимо для выравнивания морского дна.
Судно имеет ровно 8 лебедок с тросами и якорями. За счет создания сил натяжения на тросах судно может перемещаться вдоль береговой линии. Капитан судна управляет силами натяжения тросов
Якоря перекладываются редко (1-2 раза в сутки), так как этот процесс трудоемкий.
При данной раскладке якорей нужно знать какова будет геометрическая область, в которой судно может работать, а также какие силы на лебедках можно сделать для того, чтобы суммарная сила в каждую из четырех сторон (нос, корма, левый борт, правый борт) была максимальной.

Существуют ограничения на параметры тросов:
1. геометрические
	- трос может быть выпущен не под любым углом, а лишь в определенном интервале углов [a; b];
	- трос имеет длину, причем существует ограничение на минимальную длину троса [r; R];
2. физические
	- сила натяжения троса должна быть в интервале [f, F]. Минимальное ограничение на силу дает возможность сматывать трос на лебедку. Максмимальное - не дает тросу порваться.

Таким образом, программа решает следующую задачу: при данной раскладке якорей необходимо определить:
1. геометрическую область достижимости точек скредером на постели
2. максимальную силу в любую из четырех сторон при выбранном из п.1 геометрически валидного положения судна. Для этого геометрическая область достижимости дискретизируется равномерной сеткой, и в каждом узле сетки ищется максимальная сила по каждому из четырех направлений. 
Это есть задача линейнного программирования (ЛП):
	- переменные целевого функционала - силы на лебедках f1...f8
	- коэффициенты целевого функционала - косинусы/синусы углов от направления поперек судно, под которыми трос выпущен, а суммарная сила направлена поперек судна (вдоль оси судна)
	- множество ограничений:
		- суммарная сила вдоль оси судна (поперек судна) равна нулю;
		- суммарный момент сил относительно скредера равен нулю (чтобы судно не крутилось)
		- значения переменных f1...f8 должны быть в промежутке [f, F]
Эта задача ЛП решается симплекс-методом с помощью средств пакета scipy языка Python.
Результатом расчета для пользователя программы для пользователя программы является раскраска геометрической области достижимости от красного до фиолетового в радужной палитре: чем ближе цвет к фиолетовому, тем бОльшую силу можно создать в этой точке пространства во всех четырех направлениях.

## Проблема, решаемая средствами машинного обучения

Основной пользователь программы - капитан судна Arctic Scradeway - пожелал в программе следующее изменение: не нужно сначала расставлять якоря в программе, чтобы программа нашла геометрическую область достижимости и решила задачу ЛП, а нужно наоборот - пользователь нарисует область работ, внутри которой требуется провести работы по отсыпке щебня, а программа должна расставить якоря **оптимальным** образом

**Оптимальным** образом означает:
1. Получившаяся при раскладке геометрическая область содержит внутри себя область работ;
2. Геометрическая область должна иметь раскраску - результат решения задачи ЛП - такую, чтобы было "больше пятен" с цветами ближе к фиолетовому. Математическая постановка этого пункта будет изменяться. Варианты оптимизации для машинного обучения:
	- минимизировать суммарную площадь "красных пятен"
	- максимизировать суммарную площадь "фиолетовых" и "синих" пятен
	- "средний цвет" был ближе к фиолетовому
